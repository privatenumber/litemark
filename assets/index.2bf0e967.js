var t=Object.assign;import{c as e,m as n,e as a,p as r,a as o,b as s,o as i,d as l,w as d,f as c,g as u,l as m,h as p,i as h,k as g,r as f,j as b,n as w,v as k,q as v,t as _,s as y}from"./vendor.72ee55aa.js";let j;!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(n){const a=new URL(t,location),r=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((n,o)=>{const s=new URL(t,a);if(self[e].moduleMap[s])return n(self[e].moduleMap[s]);const i=new Blob([`import * as m from '${s}';`,`${e}.moduleMap['${s}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){o(new Error(`Failed to import: ${t}`)),r(l)},onload(){n(self[e].moduleMap[s]),r(l)}});document.head.appendChild(l)})),self[e].moduleMap={}}}("/litemark/assets/");const x={},L=function(t,e){if(!e)return t();if(void 0===j){const t=document.createElement("link").relList;j=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in x)return;x[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const a=document.createElement("link");return a.rel=e?"stylesheet":j,e||(a.as="script",a.crossOrigin=""),a.href=t,document.head.appendChild(a),e?new Promise((t=>{a.addEventListener("load",t)})):void 0}))).then((()=>t()))},D={js:"javascript",ts:"typescript",html:"xml",xhtml:"xml",rss:"xml",atom:"xml",xjb:"xml",xsd:"xml",xsl:"xml",plist:"xml",wsf:"xml",svg:"xml",vue:"xml",sh:"bash"},V={javascript:()=>L((()=>__import__("./javascript.82338d8c.js").then((function(t){return t.j}))),void 0),typescript:()=>L((()=>__import__("./typescript.6e5a742b.js").then((function(t){return t.t}))),void 0),yaml:()=>L((()=>__import__("./yaml.bf1ffc65.js").then((function(t){return t.y}))),void 0),json:()=>L((()=>__import__("./json.b0b6b5d6.js").then((function(t){return t.j}))),void 0),xml:()=>L((()=>__import__("./xml.6f82268e.js").then((function(t){return t.x}))),void 0),diff:()=>L((()=>__import__("./diff.bae355c6.js").then((function(t){return t.d}))),void 0),bash:()=>L((()=>__import__("./bash.7da19db1.js").then((function(t){return t.b}))),void 0)};const $=[[/hljs-comment/g,"pl-c"],[/hljs-keyword/g,"pl-k"],[/hljs-name|hljs-attr/g,"pl-ent"],[/hljs-number|hljs-literal/g,"pl-c1"],[/hljs-string/g,"pl-s"],[/hljs-built_in/g,"pl-smi"],[/hljs-addition/g,"pl-mi1"],[/hljs-deletion/g,"pl-md"],[/ class="hljs-tag"/g,""]];n.use({renderer:{heading(t,e){const n=t.toLowerCase().replace(/\W+/g,"-");return`\n\t\t\t<h${e}>\n\t\t\t\t<a\n\t\t\t\t\tid="${n}"\n\t\t\t\t\tclass="anchor"\n\t\t\t\t\thref="#${n}"\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\taria-hidden="true"\n\t\t\t\t\t\tclass="octicon octicon-link"\n\t\t\t\t\t></span>\n\t\t\t\t</a>\n\t\t\t\t${t}\n\t\t\t</h${e}>\n\t\t\t`},text:t=>t=t.replace(/:([\w+-]+):/g,((t,e)=>{const n=a[e];return n?`\n\t\t\t\t\t<img\n\t\t\t\t\t\tclass="emoji"\n\t\t\t\t\t\ttitle="${t}"\n\t\t\t\t\t\talt="${t}"\n\t\t\t\t\t\tsrc="${n}"\n\t\t\t\t\t\theight="20"\n\t\t\t\t\t\twidth="20"\n\t\t\t\t\t\talign="absmiddle"\n\t\t\t\t\t>`:t}))},async highlight(t,n,a){let r=await async function(t,n){if(!t)return n;if(D[t]&&(t=D[t]),!V[t])return n;const{default:a}=await V[t]();a?e.registerLanguage(t,a):console.warn("Failed to load",t);try{return e.highlight(t,n).value}catch(r){return n}}(n,t);for(const[e,o]of $)r=r.replace(e,o);a(null,r)}});const E={props:{modelValue:{type:String,required:!0},language:{type:String,required:!0},theme:{type:String,default:"vs"}},emits:["update:modelValue"],mounted(){this.initMonaco()},methods:{initMonaco(){this.editor=s.create(this.$refs.monacoRef,{value:this.modelValue,language:this.language,theme:this.theme,automaticLayout:!0,wordWrap:!0,quickSuggestions:!1}),this.editor.updateOptions({tabSize:4}),this.editor.onDidChangeModelContent((()=>{this.$emit("update:modelValue",this.editor.getValue())}))},insertToCaret(t){const{editor:e}=this;e.executeEdits("",[{range:e.getSelection(),text:t,forceMoveMarkers:!0}])}}},M=d("data-v-87242984");r("data-v-87242984");const S={ref:"monacoRef",class:"monaco-editor"};o();const T=M(((t,e,n,a,r,o)=>(i(),l("div",S,null,512))));E.render=T,E.__scopeId="data-v-87242984";const A={},I=d("data-v-43dba2d5");r("data-v-43dba2d5");const F={class:"spinner",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},O=c("circle",{cx:"50",cy:"50",r:"45"},null,-1);o();const R=I(((t,e)=>(i(),l("svg",F,[O]))));A.render=R,A.__scopeId="data-v-43dba2d5";const G={props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],data:()=>({tokenFocused:!1})};G.render=function(t,e,n,a,r,o){return i(),l("input",{value:n.modelValue,type:r.tokenFocused?"text":"password",onFocus:e[1]||(e[1]=t=>r.tokenFocused=!0),onBlur:e[2]||(e[2]=t=>r.tokenFocused=!1),onInput:e[3]||(e[3]=e=>t.$emit("update:modelValue",e.target.value))},null,40,["value","type"])};const P={emits:["drop-file"],methods:{onDrop(t){if(t.dataTransfer.items)for(const e of t.dataTransfer.items){const t=e.getAsFile();this.$emit("drop-file",t)}else console.log(t.dataTransfer.files)}}},U=d("data-v-50f3e1a7");r("data-v-50f3e1a7");const C=c("div",{class:"dotted-container"}," Drop to upload ",-1);o();const q=U(((t,e,n,a,r,o)=>(i(),l("div",{class:"upload-drop-zone",onDrop:e[1]||(e[1]=u(((...t)=>o.onDrop&&o.onDrop(...t)),["prevent"])),onDragover:e[2]||(e[2]=u((()=>{}),["prevent"]))},[C],32))));P.render=q,P.__scopeId="data-v-50f3e1a7";const H=new m({max:1e3}),N={components:{MonacoEditor:E,Spinner:A,TokenInput:G,UploadDropZone:P,SplitView:p},data:()=>({isDragging:!1,isLoading:!1,rateLimit:{remaining:0,limit:0},state:JSON.parse(window.localStorage.getItem("state"))||{markdownSource:"# ðŸ–‹ Welcome to Litemark\nLitemark is a GitHub Flavored Markdown editor.\n\nEdit your markdown on the left for it to be rendered on the right!\n",useGithubApi:!1,githubToken:""}}),computed:{cachePrefix(){return this.state.useGithubApi?"github":"marked"}},watch:{"state.markdownSource":"renderMarkdown","state.useGithubApi":"renderMarkdown",state:{handler(t){window.localStorage.setItem("state",JSON.stringify(t))},deep:!0}},created(){this.getGithubMarkdown=h(this.getGithubMarkdown,500)},methods:{formatNumber:t=>Number(t).toLocaleString(),onDropFile(t){this.isDragging=!1,t.type.startsWith("image")&&this.$refs.monaco.insertToCaret(`<img src="${URL.createObjectURL(t)}" alt="${t.name}">`)},async renderMarkdown(){const t=this.state.markdownSource.trim(),e=this.cachePrefix+t;let a=H.get(e);var r;a||(this.isLoading=!0,a=this.state.useGithubApi?await this.getGithubMarkdown(t):await(r=t,new Promise((async(t,e)=>{n(r,{gfm:!0},((n,a)=>{n?e(n):t(a)}))}))),this.isLoading=!1,H.set(e,a)),this.setIframeHtml(a)},setIframeHtml(t){this.$refs.previewFrame.contentWindow.document.body.firstChild.innerHTML=t},async getGithubMarkdown(e){let n;try{return n=await g.post("https://api.github.com/markdown",{headers:t({},this.state.githubToken?{Authorization:`token ${this.state.githubToken}`}:{}),json:{text:e}}),this.rateLimit.remaining=n.headers.get("x-ratelimit-remaining"),this.rateLimit.limit=n.headers.get("x-ratelimit-limit"),await n.text()}catch(a){return console.warn(a),`Failed with error: ${a.message}`}}}},W=d("data-v-924f4544");r("data-v-924f4544");const z={class:"settings"},B=v(" Use GitHub API "),J=c("a",{href:"https://developer.github.com/v3/markdown/",target:"_blank"}," [?] ",-1),Z={key:0},K={class:"preview"};o();const Q=W(((t,e,n,a,r,o)=>{const s=f("upload-drop-zone"),d=f("token-input"),u=f("monaco-editor"),m=f("spinner"),p=f("split-view");return i(),l(p,null,{A:W((()=>[c("div",{class:"editor",onDragenter:e[5]||(e[5]=t=>r.isDragging=!0)},[r.isDragging?(i(),l(s,{key:0,onDragleave:e[1]||(e[1]=t=>r.isDragging=!1),onDropFile:o.onDropFile},null,8,["onDropFile"])):b("",!0),c("div",z,[c("label",null,[w(c("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>r.state.useGithubApi=t),type:"checkbox"},null,512),[[k,r.state.useGithubApi]]),B,J]),r.state.useGithubApi?(i(),l("div",Z,[c(d,{modelValue:r.state.githubToken,"onUpdate:modelValue":e[3]||(e[3]=t=>r.state.githubToken=t),class:"token-input",placeholder:"GitHub token"},null,8,["modelValue"]),v(" "+_(o.formatNumber(r.rateLimit.remaining))+"/"+_(o.formatNumber(r.rateLimit.limit)),1)])):b("",!0)]),c(u,{ref:"monaco",modelValue:r.state.markdownSource,"onUpdate:modelValue":e[4]||(e[4]=t=>r.state.markdownSource=t),language:"markdown",theme:"vs-dark"},null,8,["modelValue"])],32)])),B:W((()=>[c("div",K,[r.isLoading?(i(),l(m,{key:0,class:"spinner-container"})):b("",!0),c("iframe",{ref:"previewFrame",srcdoc:"<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css'><link rel='stylesheet' href='https://unpkg.com/highlight.js@10.4.1/styles/github-gist.css'><base target='_blank'><style>.markdown-body{ padding: 32px }</style><div class='markdown-body'></div>",onLoadOnce:e[6]||(e[6]=(...t)=>o.renderMarkdown&&o.renderMarkdown(...t))},null,544)])])),_:1})}));N.render=Q,N.__scopeId="data-v-924f4544",y(N).mount("#app");
